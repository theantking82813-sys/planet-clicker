<script>
let money = 0;
let perClick = 1;
let perSecond = 0;
let playTime = 0;

let pets = {
    asteroid:false,
    satellite:false,
    moon:false
};

let achievements = {
    money:false,
    time:false
};

const moneySpan = document.getElementById("money");
const shop = document.getElementById("shop");
const achievementsDiv = document.getElementById("achievements");

/* ===== SAVE SYSTEM ===== */

function save(){
    localStorage.setItem("planetClickerSave", JSON.stringify({
        money,
        perClick,
        perSecond,
        playTime,
        pets,
        achievements
    }));
}

function load(){
    let data = localStorage.getItem("planetClickerSave");
    if(!data) return;

    data = JSON.parse(data);

    money = data.money ?? 0;
    perClick = data.perClick ?? 1;
    perSecond = data.perSecond ?? 0;
    playTime = data.playTime ?? 0;
    pets = data.pets ?? pets;
    achievements = data.achievements ?? achievements;

    if(pets.asteroid) addOrbit("â˜„ï¸");
    if(pets.satellite) addOrbit("ğŸ›°");
    if(pets.moon) addOrbit("ğŸŒ•");

    update();
}

/* ===== GAME ===== */

document.getElementById("earth").onclick = () => {
    money += perClick;
    update();
};

function toggleShop(){
    shop.style.display = shop.style.display === "block" ? "none":"block";
    renderShop();
}

function renderShop(){
    shop.innerHTML = `
    <h3>ğŸ›’ Pet Shop</h3>

    â˜„ï¸ Asteroid ($200) +2 per click
    <button onclick="buyAsteroid()">Buy</button><br><br>

    ğŸ›° Satellite ($500) +3 per second
    <button onclick="buySatellite()">Buy</button><br><br>

    ğŸŒ• Moon ($3500) +50 per click
    <button onclick="buyMoon()">Buy</button>
    `;
}

function addOrbit(emoji){
    let orbit = document.createElement("div");
    orbit.className = "orbit";
    orbit.innerHTML = `<div class="pet">${emoji}</div>`;
    document.getElementById("orbits").appendChild(orbit);
}

function buyAsteroid(){
    if(money>=200 && !pets.asteroid){
        money -= 200;
        pets.asteroid = true;
        perClick += 2;
        addOrbit("â˜„ï¸");
        update();
    }
}

function buySatellite(){
    if(money>=500 && !pets.satellite){
        money -= 500;
        pets.satellite = true;
        perSecond += 3;
        addOrbit("ğŸ›°");
        update();
    }
}

function buyMoon(){
    if(money>=3500 && !pets.moon){
        money -= 3500;
        pets.moon = true;
        perClick += 50;
        addOrbit("ğŸŒ•");
        update();
    }
}

/* ===== ACHIEVEMENTS ===== */

function toggleAchievements(){
    achievementsDiv.style.display =
        achievementsDiv.style.display === "block" ? "none" : "block";
    renderAchievements();
}

function renderAchievements(){
    achievementsDiv.innerHTML = `
    <h3>ğŸ† Achievements</h3>

    <div class="ach ${achievements.money?"unlocked":""}">
        ğŸ’° $1000 (${achievements.money?"Unlocked":"Locked"})
    </div>

    <div class="ach ${achievements.time?"unlocked":""}">
        â± 60 Minutes (${achievements.time?"Unlocked":Math.floor(playTime/60)} / 60)
    </div>
    `;
}

/* ===== UPDATE LOOP ===== */

function update(){
    moneySpan.innerText = money;

    if(money >= 1000) achievements.money = true;
    if(playTime >= 3600) achievements.time = true;

    save();
}

setInterval(() => {
    money += perSecond;
    playTime++;
    update();
}, 1000);

/* ===== LOAD SAVE ===== */

load();
update();
</script>

